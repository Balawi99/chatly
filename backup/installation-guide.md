# دليل تثبيت مشروع Chatly

## متطلبات النظام

- Node.js (الإصدار 14 أو أحدث)
- npm (الإصدار 6 أو أحدث)
- متصفح حديث (Chrome، Firefox، Edge، أو Safari)

## خطوات التثبيت

### 1. استخراج الملفات

قم باستخراج محتويات ملف ZIP إلى مجلد على جهازك.

### 2. تثبيت اعتماديات الخادم الخلفي (Backend)

```bash
# الانتقال إلى مجلد الخادم الخلفي
cd backend

# تثبيت الاعتماديات
npm install

# إنشاء قاعدة البيانات وتطبيق الترحيلات
npx prisma migrate dev --name init

# توليد عميل Prisma
npx prisma generate
```

### 3. تثبيت اعتماديات الواجهة الأمامية (Frontend)

```bash
# الانتقال إلى مجلد الواجهة الأمامية
cd frontend

# تثبيت الاعتماديات
npm install
```

### 4. تكوين ملفات البيئة

#### ملف `.env` للخادم الخلفي

تأكد من وجود ملف `.env` في مجلد `backend` بالمحتوى التالي:

```
PORT=5000
NODE_ENV=development
FRONTEND_URL=http://localhost:3001
JWT_SECRET=chatly_jwt_secret_key_for_development
JWT_EXPIRES_IN=7d
DATABASE_URL="file:./prisma/dev.db"
OPENAI_API_KEY=your_openai_api_key_here
```

يمكنك تغيير `OPENAI_API_KEY` إلى مفتاح API الخاص بك إذا كنت ترغب في استخدام ميزات الذكاء الاصطناعي.

#### ملف `.env` للواجهة الأمامية

تأكد من وجود ملف `.env` في مجلد `frontend` بالمحتوى التالي:

```
REACT_APP_API_URL=http://localhost:5000/api
```

### 5. تشغيل التطبيق

#### تشغيل الخادم الخلفي

```bash
# في مجلد backend
npm run dev
```

#### تشغيل الواجهة الأمامية

```bash
# في مجلد frontend
# لتشغيل الواجهة الأمامية على المنفذ 3001
set PORT=3001 && npm start
```

### 6. الوصول إلى التطبيق

بعد تشغيل كل من الخادم الخلفي والواجهة الأمامية، يمكنك الوصول إلى التطبيق عبر المتصفح على العنوان:

```
http://localhost:3001
```

## استكشاف الأخطاء وإصلاحها

### مشكلة "المنفذ قيد الاستخدام"

إذا واجهت خطأ `EADDRINUSE: address already in use :::5000`، فهذا يعني أن المنفذ 5000 قيد الاستخدام بالفعل. يمكنك:

1. إيقاف العملية التي تستخدم المنفذ:
   ```bash
   # في Windows
   npx kill-port 5000
   
   # في Linux/Mac
   lsof -ti:5000 | xargs kill
   ```

2. أو تغيير المنفذ في ملف `.env` الخاص بالخادم الخلفي.

### مشكلة في قاعدة البيانات

إذا واجهت مشاكل مع قاعدة البيانات، يمكنك حذف ملفات قاعدة البيانات وإعادة إنشائها:

```bash
# في مجلد backend
# حذف ملفات قاعدة البيانات
del prisma\dev.db
del prisma\dev.db-journal

# إعادة إنشاء قاعدة البيانات
npx prisma migrate dev
```

### مشكلة في Prisma

إذا واجهت مشاكل مع Prisma، جرب إعادة تثبيته:

```bash
npm uninstall prisma @prisma/client
npm install prisma @prisma/client
npx prisma generate
```

## ميزات التطبيق

- **نظام المصادقة**: تسجيل الدخول، التسجيل، وإدارة الملف الشخصي.
- **الدردشة المباشرة**: محادثات مباشرة مع الزوار.
- **ويدجت الدردشة**: يمكن تضمينه في مواقع أخرى.
- **قاعدة المعرفة**: تحميل ملفات PDF وTXT، واستخراج المحتوى من مواقع الويب.
- **تكامل الذكاء الاصطناعي**: ردود آلية باستخدام OpenAI.
- **لوحة التحكم التحليلية**: إحصائيات حول المحادثات وأداء الويدجت. 